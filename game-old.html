<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="description" content="Juego de memoria divertido y adictivo para entrenar tu mente">
  <meta name="theme-color" content="#71c9ce">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="MemoFlip">
  
  <title>MemoFlip - Juego de Cartas</title>
  
  <style>
    /* CSS INLINE - HEADER UNIFICADO PERFECTO */
    * { box-sizing: border-box; }
    
    body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, sans-serif;
        background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
    }
    
    .app-container {
        display: flex;
        flex-direction: column;
        height: 100vh;
        width: 100vw;
    }
    
    /* HEADER FIJO */
    .game-hud {
        display: flex;
        align-items: center;
        padding: 15px;
        background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.2));
        backdrop-filter: blur(10px);
        border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        height: 90px;
        min-height: 90px;
        max-height: 90px;
        z-index: 100;
        width: 100%;
    }
    
    .hud-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        height: 100%;
    }
    
    .hud-left { flex: 0 0 auto; }
    .hud-center { flex: 1; display: flex; flex-direction: column; align-items: center; }
    .hud-right { 
        flex: 0 0 auto; 
        display: flex; 
        align-items: center; 
        gap: 8px;
    }
    
    .logo-banner {
        height: 60px;
        width: auto;
        object-fit: contain;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
    }
    
    .hud-stats {
        display: flex;
        gap: 10px;
        align-items: center;
    }
    
    .stat-item {
        display: flex;
        align-items: center;
        gap: 5px;
        color: white;
        font-size: 14px;
        font-weight: bold;
        text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        margin-top: 8px;
    }
    
    .hud-btn-img-large {
        width: 24px;
        height: 24px;
        object-fit: contain;
        filter: drop-shadow(0 1px 3px rgba(0,0,0,0.5));
        margin-top: 8px;
    }
    
    .hud-nav {
        display: flex;
        align-items: center;
        margin-left: 10px;
        padding-left: 10px;
        border-left: 2px solid rgba(255, 215, 0, 0.3);
        margin-top: 8px;
    }
    
    .hud-btn-simple {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        padding: 8px;
        border-radius: 8px;
        transition: 0.2s ease;
    }
    
    .hud-btn-simple:hover {
        background: rgba(255,255,255,0.1);
        transform: scale(1.05);
    }
    
    .hud-btn-img {
        width: 28px;
        height: 28px;
        object-fit: contain;
        filter: drop-shadow(0 1px 3px rgba(0,0,0,0.5));
        margin-top: 8px;
    }
    
    /* BOTÃ“N HOME FLOTANTE */
    .home-floating-btn {
        position: fixed;
        top: 120px;
        left: 15px;
        z-index: 200;
        background: rgba(0, 0, 0, 0.8);
        border: 2px solid #ffd700;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: 0.2s ease;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }
    
    .home-floating-btn:hover {
        background: rgba(255, 215, 0, 0.2);
        transform: scale(1.1);
    }
    
    .home-floating-icon {
        width: 24px;
        height: 24px;
        filter: drop-shadow(0 1px 3px rgba(0,0,0,0.5));
    }
    
    /* CONTENIDO PRINCIPAL */
        .main-content {
            flex: 1 !important;
            position: relative !important;
            height: calc(100vh - 90px) !important;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460) !important;
        }
        
        .content-container {
            position: relative !important;
            z-index: 1 !important;
            height: 100% !important;
            display: flex !important;
            flex-direction: column !important;
            overflow: hidden !important;
        }
        
        /* TOOLBAR DEL JUEGO */
        .game-toolbar {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            padding: clamp(8px, 2vw, 15px) !important;
            background: rgba(0,0,0,0.2) !important;
            border-bottom: 1px solid rgba(255,255,255,0.1) !important;
            margin-bottom: clamp(10px, 2vh, 20px) !important;
        }
        
        /* CENTRAR EL TABLERO */
        .board {
            display: grid !important;
            gap: clamp(8px, 2vw, 15px) !important;
            justify-content: center !important;
            align-items: center !important;
            margin: 0 auto !important;
            padding: clamp(10px, 2vw, 20px) !important;
            max-width: 90vw !important;
            place-items: center !important;
            justify-items: center !important;
        }
        
        /* FORZAR CENTRADO DE CARTAS */
        .card {
            margin: 0 auto !important;
        }
        
        /* FONDO DEL JUEGO */
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460) !important;
        }
  </style>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§ </text></svg>">
</head>
<body>
  <div class="app-container">
    <!-- HEADER DIRECTO (sin componente) -->
    <header class="game-hud">
        <div class="hud-content">
            <div class="hud-left"></div>
            
            <div class="hud-center">
                <img src="images/ui/logo-banner.png" alt="MemoFlip" class="logo-banner">
            </div>
            
            <div class="hud-right">
                <div class="hud-stats">
                    <div class="stat-item">
                        <img src="images/ui/star.png" alt="Stars" class="hud-btn-img-large">
                        <span id="total-stars">0</span>
                    </div>
                    <div class="stat-item">
                        <img src="images/ui/trofeo.png" alt="Trophies" class="hud-btn-img-large">
                        <span id="total-trophies">0</span>
                    </div>
                </div>
                
                <div class="hud-nav">
                    <button class="hud-btn-simple" onclick="showRanking()">
                        <img src="images/ui/ranking.png" alt="Ranking" class="hud-btn-img">
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- BOTÃ“N HOME FLOTANTE -->
    <button class="home-floating-btn" onclick="window.location.href='index.html'" title="Volver al inicio">
        <img src="images/ui/home.png" alt="Home" class="home-floating-icon">
    </button>
    
    <!-- Main Content -->
    <main class="main-content">
      <!-- Contenido del juego -->
      <div class="content-container">
        <!-- Toolbar del juego -->
        <div class="game-toolbar">
          <div class="stats">
            <span class="pill">Intentos: <b id="moves">0</b></span>
            <span class="pill">Tiempo: <b id="time">0:00</b></span>
            <span class="pill" id="currentLevelInfo">Nivel 1</span>
          </div>
        </div>
        
        <!-- Tablero de juego -->
        <div id="board" class="board" aria-label="Tablero de memory"></div>
      </div>
    </main>
  </div>

  <div id="winModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="winTitle">
    <div class="dialog">
      <h2 id="winTitle" style="margin-top:0">Â¡Nivel completado! ðŸŽ‰</h2>
      <p style="margin:6px 0">Intentos: <b id="sumMoves">0</b> Â· Tiempo: <b id="sumTime">0:00</b></p>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
        <button id="again" class="btn">Repetir</button>
        <button id="next" class="btn">Siguiente nivel</button>
      </div>
    </div>
  </div>

  <!-- Modal de estadÃ­sticas eliminado -->

  <!-- Cargar archivos JS en orden -->
  <script src="js/settings.js"></script>
  <script src="js/utils.js"></script>
  <!-- <script src="js/theme-system.js"></script> --> <!-- DESHABILITADO -->
  <script src="js/sound-system.js"></script>
  <script src="js/tutorial-system.js"></script>
  <script src="js/trophy-system.js"></script>
  <script src="js/achievement-system.js"></script>
  <script src="js/ranking-system.js"></script>
  <script src="js/main.js"></script>
  <script>
    // Funciones del header
    function showRanking() {
        window.location.href = 'ranking.html';
    }
    
    // Actualizar estadÃ­sticas
    function updateHeaderStats() {
        const totalStats = Storage.getTotalStats();
        const totalStarsElement = document.getElementById('total-stars');
        const totalTrophiesElement = document.getElementById('total-trophies');
        
        // Debug eliminado
        if (totalStarsElement) totalStarsElement.textContent = totalStats.totalStars;
        if (totalTrophiesElement) totalTrophiesElement.textContent = totalStats.totalTrophies;
    }
    
    // Inicializar pÃ¡gina
    document.addEventListener('DOMContentLoaded', function() {
      updateHeaderStats();
    });
    
    // Service Worker deshabilitado temporalmente
    // if ('serviceWorker' in navigator) {
    //   window.addEventListener('load', () => {
    //     navigator.serviceWorker.register('/sw.js')
    //       .then(registration => {
    //         console.log('SW registrado con Ã©xito: ', registration.scope);
    //       })
    //       .catch(registrationError => {
    //         console.log('SW registro fallÃ³: ', registrationError);
    //       });
    //   });
    // }
  </script>
</body>
</html>
